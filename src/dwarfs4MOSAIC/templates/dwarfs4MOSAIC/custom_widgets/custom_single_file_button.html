<!--
  Custom widget for selecting a single image file.

  - Displays a button labeled "Select Image".
  - Clicking the button opens the hidden file input dialog.
  - When a file is selected, its name is displayed next to the button.

  Context variables used:
  - widget.name: the name attribute for the input field.
  - widget.attrs.id: unique ID of the input, used to link the button and display area.

  This widget is typically integrated in Django forms to provide a more user-friendly image upload interface.
-->

<div style="display: flex; align-items: center;">
  <button type="button" class="custom-single-btn" style="flex-shrink: 0;">Select Image</button>
  <!-- Container to show selected filename -->
  <div id="{{ widget.attrs.id }}_count" style="margin-left: 10px; white-space: normal;"></div>
</div>

<input type="file" name="{{ widget.name }}" id="{{ widget.attrs.id }}" style="display:none;">

<script>
// When button is clicked, open file selector
document.querySelector('.custom-single-btn').addEventListener('click', function(){
    document.getElementById('{{ widget.attrs.id }}').click();
});

// When a file is selected, show its name
document.getElementById('{{ widget.attrs.id }}').addEventListener('change', function(){
    var countDiv = document.getElementById('{{ widget.attrs.id }}_count');
    var files = this.files;

    if(files.length === 0){
        countDiv.textContent = '';  // no file selected
    } else {
        countDiv.innerHTML = '<strong>Selected image:</strong> &nbsp;' + files[0].name;
    }
});
</script>

<style>
.custom-single-btn {
    background-color: #417690;
    color: white;
    padding: 9px 9px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    margin-left: 10px;
}
</style>

