<!--
    Info Page Template

    Purpose:
    - Display platform information stored in an HTML file.
    - Rendered content may include formatting like bold, headings, bullets, and line breaks.

    Context:
    - user: current authenticated user (implicit)
    - content: HTML string read from the platform_info.html file (passed from view)
-->

{# Base template #}
{% extends 'dwarfs4MOSAIC/base.html' %}

{# Static template tags #}
{% load custom_tags %}

{# Sets the page title #}
{% block title %}{% html_title "Information" %}{% endblock %}

{# Defines the breadcrumb text for navigation #}
{% block breadcrumb %} Info {% endblock %}

{# Render the HTML content safely without escaping it.
   Only do this for trusted content to avoid XSS issues. #}
{% block content %}

    <!-- Main heading -->
    <h1>
        Platform Information
        {% if user.is_superuser %}
            <a href="#edit-info" class="edit-link">(Edit)</a>
        {% endif %}
    </h1>
    <br>

    <div class="platform-info">
        {{ content|safe }}
    </div>

    {% if is_superuser %}
        <br>
        <hr>
        <br>
        <h2 id="edit-info">Edit Platform Info (Administrator only)</h2>
        <br>
        <form method="post">
            {% csrf_token %}
            <textarea id="autoHeight" name="content" style="width:100%;">{{ content }}</textarea>
            <script>
                const ta = document.getElementById('autoHeight');
                ta.style.height = ta.scrollHeight + "px";
            </script>
            <br><br>
            <button type="submit"
                id="action_button"
                style="cursor:pointer; background-color: var(--breadcrumbs-color); color: white;
                       padding: 10px 20px; border-radius: 5px; text-decoration: none; font-size: 16px;"
                title="Save the changes">
            Save changes
        </button>
        </form>
    {% endif %}

{% endblock %}