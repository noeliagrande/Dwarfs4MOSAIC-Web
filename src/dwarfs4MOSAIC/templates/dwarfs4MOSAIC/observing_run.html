
<!-- Arguments: 'observing_run', 'lst_observing_blocks', 'lst_researchers'  -->

{% extends 'dwarfs4MOSAIC/base.html' %}

{% block title %} Observing Run: {{ observing_run.name }} {% endblock %}

{% block breadcrumb %}
    <a href="{% url 'database' %}">Database</a> &gt
    <a href="{% url 'observing_runs' %}">Observing Runs</a> &gt
    {{ observing_run.name }}
{% endblock %}

{% block content %}
    <body>
        <h1>
            Observing Run: {{ observing_run.name }}
        </h1>
        <br><br>
        <h2>
            Researchers
        </h2>
        <section class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>NAME</th>
                        <th>ROLE</th>
                        <th>INSTITUTION</th>
                        <th>EMAIL</th>
                    </tr>
                </thead>
                <tbody>
                    {% for researcher in lst_researchers %}
                        <tr>
                            <td>{{ researcher.name }}</td>
                            <td>{{ researcher.role }}</td>
                            <td>{{ researcher.institution }}</td>
                            {% if researcher.email %}
                                <td style="text-align: center;"> {{ researcher.email }} </td>
                            {% else %}
                                <td></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
        <br><br>
        <h2>
            Observing blocks
        </h2>
        <section class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>BLOCK NAME</th>
                        <th>DESCRIPTION</th>
                        <th>START TIME</th>
                        <th>END TIME</th>
                        <th>BLOCK RESEARCHERS</th>
                        <th>TARGET</th>
                        <th>OBSERVATION MODE</th>
                        <th>FILTERS</th>
                        <th>EXPOSURE TIME</th>
                        <th>SEEING</th>
                        <th>WEATHER CONDITIONS</th>
                        <th>NOTES</th>
                    </tr>
                </thead>
                <tbody>
                    {% for block in lst_observing_blocks %}
                        <tr>
                            <td>{{ block.name }}</td>
                            <td class="resizable-td">
                                <div class="resizable-div">
                                    {{ block.description }}
                                </div>
                            </td>
                            <td>{{ block.start_time }}</td>
                            <td>{{ block.end_time }}</td>
                            <td>
                                {% for researcher in block.researchers.all %}
                                    {{ researcher.name }}<br>
                                {% empty %}
                                    No researchers assigned.
                                {% endfor %}
                            </td>
                            <td> TBD </td>
                            <td>{{ block.observation_mode }}</td>
                            <td>{{ block.filters }}</td>
                            <td>{{ block.exposure_time }}</td>
                            <td>{{ block.seeing }}</td>
                            <td>{{ block.weather_conditions }}</td>
                            <td class="resizable-td">
                                <div class="resizable-div">
                                    {{ block.notes }}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </body>
{% endblock %}